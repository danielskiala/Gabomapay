<div class="wrapper">
    <app-admin-nav [addActive]="addActive"></app-admin-nav>
    <!-- Modal -->
    <div class="modal transaction" aria-hidden="true" aria-modal="modal" role="dialog" [class.active]="showModal"
        (click)="disableModal()">
        <div class="modal-wrapper" (click)="stopEvent($event)">
            <div class="modal-header">
                <span class="icon">
                    <svg id="Capa_1" enable-background="new 0 0 609.655 609.655" height="512"
                        viewBox="0 0 609.655 609.655" width="512" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <g id="Page-1_16_">
                                <g id="_x30_17---Checklist">
                                    <path id="Shape_25_"
                                        d="m152.414 0c-5.612 0-10.161 4.549-10.161 10.161v30.483h-30.483c-28.045.034-50.771 22.76-50.805 50.805v467.401c.034 28.045 22.76 50.771 50.805 50.805h386.115c28.045-.034 50.771-22.76 50.805-50.805v-467.402c-.034-28.045-22.76-50.771-50.805-50.805h-30.483v-30.482c0-5.612-4.549-10.161-10.161-10.161s-10.161 4.549-10.161 10.161v30.483h-81.287v-30.483c0-5.612-4.549-10.161-10.161-10.161s-10.161 4.549-10.161 10.161v30.483h-81.287v-30.483c0-5.612-4.55-10.161-10.161-10.161s-10.161 4.549-10.161 10.161v30.483h-81.287v-30.483c0-5.612-4.55-10.161-10.161-10.161zm91.448 60.965v12.031c-13.997 4.949-22.393 19.262-19.883 33.894 2.511 14.632 15.198 25.328 30.044 25.328s27.533-10.696 30.044-25.328c2.51-14.632-5.886-28.945-19.883-33.894v-12.031h81.287v12.031c-13.997 4.949-22.393 19.262-19.883 33.894 2.511 14.632 15.198 25.328 30.044 25.328s27.533-10.696 30.044-25.328-5.886-28.945-19.883-33.894v-12.031h81.287v12.031c-13.997 4.949-22.393 19.262-19.883 33.894s15.198 25.328 30.044 25.328 27.533-10.696 30.044-25.328-5.886-28.945-19.883-33.894v-12.031h30.483c16.835 0 30.483 13.648 30.483 30.483v60.965c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161v386.115c0 16.835-13.648 30.483-30.483 30.483h-386.115c-16.835 0-30.483-13.648-30.483-30.483v-386.115c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161v-60.965c0-16.835 13.648-30.483 30.483-30.483h30.483v12.031c-13.997 4.949-22.393 19.262-19.883 33.894 2.511 14.632 15.198 25.328 30.044 25.328s27.533-10.696 30.044-25.328-5.886-28.945-19.883-33.894v-12.031zm10.161 30.483c5.612 0 10.161 4.549 10.161 10.161s-4.549 10.161-10.161 10.161-10.161-4.549-10.161-10.161 4.549-10.161 10.161-10.161zm101.609 0c5.612 0 10.161 4.549 10.161 10.161s-4.549 10.161-10.161 10.161-10.161-4.549-10.161-10.161 4.549-10.161 10.161-10.161zm101.609 0c5.612 0 10.161 4.549 10.161 10.161s-4.549 10.161-10.161 10.161-10.161-4.549-10.161-10.161 4.549-10.161 10.161-10.161zm-304.827 0c5.612 0 10.161 4.549 10.161 10.161s-4.549 10.161-10.161 10.161-10.161-4.549-10.161-10.161 4.549-10.161 10.161-10.161z" />
                                    <path id="Path_181_" clip-rule="evenodd"
                                        d="m132.092 172.735c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_180_" clip-rule="evenodd"
                                        d="m172.735 152.414c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_179_" clip-rule="evenodd"
                                        d="m223.54 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_178_" clip-rule="evenodd"
                                        d="m274.345 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_177_" clip-rule="evenodd"
                                        d="m325.149 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_176_" clip-rule="evenodd"
                                        d="m375.954 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_175_" clip-rule="evenodd"
                                        d="m426.758 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Path_174_" clip-rule="evenodd"
                                        d="m477.563 172.735h10.161c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-10.161c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z"
                                        fill-rule="evenodd" />
                                    <path id="Shape_24_"
                                        d="m203.218 314.988h-60.965c-11.223 0-20.322 9.098-20.322 20.322v60.965c0 11.223 9.098 20.322 20.322 20.322h60.965c11.223 0 20.322-9.098 20.322-20.322v-60.965c0-11.223-9.098-20.322-20.322-20.322zm-60.965 81.287v-60.965h60.965v60.965z" />
                                    <path id="Shape_23_"
                                        d="m203.218 436.919h-60.965c-11.223 0-20.322 9.098-20.322 20.322v60.965c0 11.223 9.098 20.322 20.322 20.322h60.965c11.223 0 20.322-9.098 20.322-20.322v-60.965c0-11.224-9.098-20.322-20.322-20.322zm-60.965 81.287v-60.965h60.965v60.965z" />
                                    <g clip-rule="evenodd" fill-rule="evenodd">
                                        <path id="Path_173_"
                                            d="m138.188 256.055c-4.489-3.367-10.858-2.457-14.225 2.032s-2.457 10.858 2.032 14.225l27.099 20.322c4.225 3.17 10.175 2.574 13.687-1.372l54.188-60.965c2.414-2.712 3.198-6.505 2.057-9.952-1.141-3.446-4.035-6.022-7.59-6.757s-7.233.483-9.647 3.195l-47.98 53.985z" />
                                        <path id="Path_172_"
                                            d="m274.345 243.862h50.805c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-50.805c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_171_"
                                            d="m365.793 243.862h111.77c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-111.77c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_170_"
                                            d="m274.345 284.505h121.931c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-121.931c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_169_"
                                            d="m274.345 355.632h50.805c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-50.805c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_168_"
                                            d="m477.563 335.31h-111.77c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161h111.77c5.612 0 10.161-4.549 10.161-10.161s-4.55-10.161-10.161-10.161z" />
                                        <path id="Path_167_"
                                            d="m274.345 396.275h121.931c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-121.931c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_166_"
                                            d="m274.345 467.402h50.805c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-50.805c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                        <path id="Path_165_"
                                            d="m477.563 447.08h-111.77c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161h111.77c5.612 0 10.161-4.549 10.161-10.161s-4.55-10.161-10.161-10.161z" />
                                        <path id="Path_164_"
                                            d="m274.345 508.045h121.931c5.612 0 10.161-4.549 10.161-10.161s-4.549-10.161-10.161-10.161h-121.931c-5.612 0-10.161 4.549-10.161 10.161s4.549 10.161 10.161 10.161z" />
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </span>
                <h3>Détails de l'utilisateur</h3>
                <hr>
            </div>

            <div class="modal-body" *ngIf="isShowing">
                <div class="modal-profil">
                    <div class="md-profi-img" *ngIf="details.profile">
                        <img src="{{image}}/profile/{{details.profile}}" alt="">
                    </div>

                    <div class="md-profi-img" *ngIf="!details.profile">
                        <img src="{{image}}/profile/default.webp" alt="image">
                    </div>


                    <div class="md-profil-title">
                        <h2>{{details.name}} {{details.prenom}}</h2>
                    </div>
                </div>

                <div class="modal-text">
                    <p><strong>Téléphone : </strong> {{details.phone}}</p>
                    <p><strong>Email : </strong>{{details.email}}</p>
                    <p><strong>Pays : </strong><img src="../../../../assets/flags/{{details.iso}}.SVG" width="30" alt="flag">{{details.country}}</p>
                    <hr>
                    <p><strong>Sexe : </strong> {{details.sexe}}</p>
                    <p><strong>Adresse : </strong>{{details.adresse}}</p>
                    <p><strong>Date d'inscription : </strong>{{details.created_at}}</p>
                    <hr>
                    <p><strong>Piéce d'identité : </strong> <span *ngIf="!details.profile">Aucune</span></p>
                    <div class="card-modal-img" *ngIf="details.identite">
                        <img src="{{image}}/identite/{{details.identite}}" alt="">
                    </div>
                    <p><strong>Solde : </strong>{{details.solde}} <span>{{details.country_id == '50' ? 'USD' : 'FCFA'
                            }}</span></p>
                    <p *ngIf="details.is_active == 1"><strong>Statut : </strong> <span
                            class="statut success">Actif</span></p>
                    <p *ngIf="details.is_active == 0"><strong>Statut : </strong> <span
                            class="statut danger">Inactif</span></p>
                </div>
            </div>

            <hr>
            <div class="modal-btn">
                <button type="button" id="close-modal" (click)="disableModal()">Fermer</button>
            </div>
        </div>
    </div>
    <!-- Modal -->


    <!-- Container Contents -->
    <div class="container-contents">
        <!-- Header-responisive -->
        <!-- Header-responisive -->

        <div class="header-responsive">
            <div class="logo-responsive">
                <h2>GabomaPay</h2>
            </div>

            <div class="toggle-responsive" id="toggle" (click)="toggle($event)">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <!-- Header-responisive -->
        <!-- Header-responisive -->
        <div class="content-blocs respon-blocs">
            <!-- Header -->
            <div class="header pd-10">
                <div class="title">
                    <h3>Gerèr les utilisateurs</h3>
                    <p>Bienvenue dans votre espace d'administration !</p>
                </div>

                <div class="search">
                    <div class="group-form">
                        <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
                                <path d="M221.09,64A157.09,157.09,0,1,0,378.18,221.09,157.1,157.1,0,0,0,221.09,64Z"
                                    style="fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:32px" />
                                <line x1="338.29" y1="338.29" x2="448" y2="448"
                                    style="fill:none;stroke:#000;stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" />
                            </svg>
                        </span>
                        <input type="text" [(ngModel)]="nom" (ngModelChange)="search()"
                            placeholder="Rechercher par le nom">
                    </div>
                </div>
            </div>
            <!-- Header -->

            <!-- Tableau -->
            <div class="tableau pd-10" style="margin-top:20px;">

                <div class="loader-tab" [class.active]="isLoading">
                    <div class="lds-roller">
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>

                <div class="table">
                    <table class="wd-1000">
                        <thead>
                            <th (click)="sort('id')">#ID <span class="icon-sort"></span></th>
                            <th (click)="sort('name')">Nom <span class="icon-sort"></span></th>
                            <th (click)="sort('prenom')">Prenom <span class="icon-sort"></span></th>
                            <th (click)="sort('email')">Email <span class="icon-sort"></span></th>
                            <th (click)="sort('solde')">Solde</th>
                            <th (click)="sort('country')">Pays <span class="icon-sort"></span></th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </thead>
                        <tbody>
                            <tr
                                *ngFor="let i = index let user of users | orderBy: key : reverse | paginate : {itemsPerPage:6,currentPage:p}">
                                <td>{{ i + 1 }}</td>
                                <td> {{ user.name }} </td>
                                <td> {{ user.prenom }} </td>
                                <td> {{ user.email }} </td>
                                <td> {{ user.solde }} {{user.country_id == 50 ? 'USD' : 'FCFA'}}</td>
                                <td><img src="../../../../assets/flags/{{user.iso}}.SVG" width="30" alt="flag"> {{ user.country }} </td>
                                <td>
                                    <label class="check-container">
                                        <input type="checkbox" hidden id="input-check" (change)="activer(user.id)"
                                            [checked]="user.is_active">
                                        <div class="check-box">
                                            <div class="check-bubble"></div>
                                        </div>
                                    </label>
                                </td>
                                <td>
                                    <button id="open-modal" (click)="show(user.id)"><span
                                            class="icon-eye"></span></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <div class="pagination">
                    <pagination-controls (pageChange)=" p = $event"></pagination-controls>
                </div>
            </div>
            <!-- Tableau -->
        </div>
    </div>
    <!-- Container Contents -->
</div>